<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Entry Advisor</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
            background-color: #f4f7f9;
            color: #333;
        }
        .container {
            background: #fff;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            color: #2c3e50;
        }
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .input-group input, .input-group select {
            width: 95%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            font-size: 16px;
            color: #fff;
            background-color: #3498db;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .results-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4f8;
            border-left: 5px solid #3498db;
            border-radius: 5px;
        }
        .results-section h2 {
            margin-top: 0;
        }
        .results-section p {
            font-size: 16px;
        }
        .highlight-green {
            font-weight: 700;
            color: #2ecc71;
        }
        .highlight-red {
            font-weight: 700;
            color: #e74c3c;
        }
        .decision-box {
            margin-top: 30px;
            padding: 25px;
            border-radius: 8px;
            font-size: 20px;
            font-weight: 700;
            text-align: center;
        }
        .decision-box.go {
            background-color: #eaf6ff;
            border: 2px solid #2ecc71;
        }
        .decision-box.caution {
            background-color: #fff8e1;
            border: 2px solid #f39c12;
        }
        .decision-box.stop {
            background-color: #fcebeb;
            border: 2px solid #e74c3c;
        }
        .reason-box {
            margin-top: 20px;
            text-align: left;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Market Entry Advisor (DCF Model)</h1>
        <p>This tool helps you decide whether to enter the market by analyzing the project's Net Present Value (NPV) and profitability.</p>

        <h2>Baseline Scenario Data</h2>
        <div class="input-group">
            <label for="baseProjects">Baseline Projects</label>
            <input type="number" id="baseProjects" value="10" min="0">
        </div>
        <div class="input-group">
            <label for="bdCount">Number of BDs</label>
            <input type="number" id="bdCount" value="2" min="0">
        </div>
        <div class="input-group">
            <label for="bdKpi">BD Monthly Project KPI</label>
            <input type="number" id="bdKpi" value="3" min="1">
        </div>
        <div class="input-group">
            <label for="baseUsers">Number of Users per Project</label>
            <input type="number" id="baseUsers" value="300" min="0">
        </div>
        <div class="input-group">
            <label for="purchasesPerUser">Purchases per User</label>
            <input type="number" id="purchasesPerUser" value="2" min="1">
        </div>
        <div class="input-group">
            <label for="claimsPerUser">Claims per User</label>
            <input type="number" id="claimsPerUser" value="5" min="1">
        </div>
        <div class="input-group">
            <label for="baseFundsRaised">Funds Raised per Project (USDT)</label>
            <input type="number" id="baseFundsRaised" value="20000" min="0">
        </div>
        <div class="input-group">
            <label for="baseFeePct">Platform Fee (%)</label>
            <input type="number" id="baseFeePct" value="3" min="0" max="100">
        </div>
        <div class="input-group">
            <label for="fixedCost">Fixed Cost (R&D, etc.) (USD)</label>
            <input type="number" id="fixedCost" value="10000" min="0">
        </div>
        <div class="input-group">
            <label for="marketCap">Total Project Market Cap</label>
            <input type="number" id="marketCap" value="80" min="0">
        </div>

        <hr>

        <h2>DCF Model Parameters</h2>
        <div class="input-group">
            <label for="discountRate">Discount Rate (%)</label>
            <input type="number" id="discountRate" value="10" min="0" step="0.1">
            <small>Represents the risk and opportunity cost of the project.</small>
        </div>
        <div class="input-group">
            <label for="growthRate">Annual Profit Growth Rate (%)</label>
            <input type="number" id="growthRate" value="20" min="0" step="0.1">
            <small>Used for calculating future cash flows in the DCF model.</small>
        </div>
        <div class="input-group">
            <label for="terminalGrowthRate">Terminal Growth Rate (%)</label>
            <input type="number" id="terminalGrowthRate" value="2" min="0" step="0.1">
            <small>The long-term profit growth rate after the explicit forecast period.</small>
        </div>
        <div class="input-group">
            <label for="forecastYears">Forecast Period (Years)</label>
            <input type="number" id="forecastYears" value="5" min="1">
            <small>Number of years to explicitly forecast cash flows.</small>
        </div>
        
        <button class="btn" onclick="runDecision()">Get Market Entry Advice</button>

        <div id="decisionResult" class="results-section" style="display: none;">
            <h2>Your Market Entry Decision:</h2>
            <div id="decisionBox" class="decision-box"></div>
            <div id="reasonBox" class="reason-box"></div>
        </div>
    </div>

    <script>
        function runDecision() {
            const PURCHASE_FEE_USD = 0.6;
            const CLAIM_FEE_USD = 0.6;
            const BD_SALARY_YEARLY = 2000 * 12;
            
            const baseProjects = parseFloat(document.getElementById('baseProjects').value);
            const bdCount = parseFloat(document.getElementById('bdCount').value);
            const bdKpi = parseFloat(document.getElementById('bdKpi').value);
            const baseUsers = parseFloat(document.getElementById('baseUsers').value);
            const purchasesPerUser = parseFloat(document.getElementById('purchasesPerUser').value);
            const claimsPerUser = parseFloat(document.getElementById('claimsPerUser').value);
            const baseFundsRaised = parseFloat(document.getElementById('baseFundsRaised').value);
            const baseFeePct = parseFloat(document.getElementById('baseFeePct').value);
            const fixedCost = parseFloat(document.getElementById('fixedCost').value);
            const marketCap = parseFloat(document.getElementById('marketCap').value);
            
            const discountRate = parseFloat(document.getElementById('discountRate').value) / 100;
            const growthRate = parseFloat(document.getElementById('growthRate').value) / 100;
            const terminalGrowthRate = parseFloat(document.getElementById('terminalGrowthRate').value) / 100;
            const forecastYears = parseInt(document.getElementById('forecastYears').value);

            const bdProjectsFromTeam = bdCount * bdKpi * 12;
            const baseTotalProjects = Math.min(baseProjects + bdProjectsFromTeam, marketCap);
            const baseAvgContribution = baseFundsRaised / baseUsers;

            function calculateProfit(totalProjects, users, fundsRaised, bdCount) {
                const platformRevenue = (totalProjects * fundsRaised * (baseFeePct / 100));
                const purchaseFeeRevenue = (totalProjects * users * purchasesPerUser * PURCHASE_FEE_USD);
                const claimFeeRevenue = (totalProjects * users * claimsPerUser * CLAIM_FEE_USD);
                const totalRevenue = platformRevenue + purchaseFeeRevenue + claimFeeRevenue;
                
                const bdProjects = totalProjects - baseProjects;
                const bdCountNeeded = bdProjects > 0 ? Math.ceil(bdProjects / (bdKpi * 12)) : 0;
                const bdCost = bdCountNeeded * BD_SALARY_YEARLY;
                const totalCost = fixedCost + bdCost;

                return totalRevenue - totalCost;
            }

            const baseProfit = calculateProfit(baseTotalProjects, baseUsers, baseFundsRaised, bdCount);

            // DCF Model Calculation
            let npv = 0;
            let projects = baseTotalProjects;
            let profit = baseProfit;
            let totalProjects = projects;
            
            for (let i = 1; i <= forecastYears; i++) {
                projects = Math.min(projects * (1 + growthRate), marketCap);
                profit = calculateProfit(projects, baseUsers, (baseFundsRaised / baseUsers) * baseUsers, bdCount);
                npv += profit / Math.pow(1 + discountRate, i);
                
                if (projects >= marketCap) {
                    projects = marketCap;
                    profit = calculateProfit(projects, baseUsers, (baseFundsRaised / baseUsers) * baseUsers, bdCount);
                }
            }

            // Terminal Value (after forecast period)
            if (discountRate > terminalGrowthRate) {
                const terminalValue = (profit * (1 + terminalGrowthRate)) / (discountRate - terminalGrowthRate);
                npv += terminalValue / Math.pow(1 + discountRate, forecastYears);
            }

            // Determine the decision
            let decision = '';
            let reasons = [];

            if (npv > 0) {
                reasons.push(`✅ **Positive NPV:** The project's Net Present Value is <strong>$${npv.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong>, indicating a strong positive inherent value after discounting future cash flows.`);
            } else {
                reasons.push(`❌ **Negative NPV:** The project's Net Present Value is <strong>$${npv.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong>. A negative NPV suggests the project may not be a worthwhile investment at the current discount rate.`);
            }

            if (baseProfit > 0) {
                reasons.push("✅ **Baseline Profitability:** The business is already profitable under your current assumptions, which provides a solid foundation.");
            } else {
                reasons.push("⚠️ **Baseline Loss:** The business is not yet profitable under your current assumptions, highlighting the need for growth to achieve a positive cash flow.");
            }

            if (npv > 0 && baseProfit > 0) {
                decision = 'GO';
            } else if (npv > 0 && baseProfit <= 0) {
                decision = 'CAUTION';
            } else {
                decision = 'STOP';
            }
            
            // Display results
            const decisionBox = document.getElementById('decisionBox');
            const reasonBox = document.getElementById('reasonBox');
            
            decisionBox.innerHTML = `Decision: ${decision}`;
            decisionBox.className = `decision-box ${decision.toLowerCase()}`;
            
            reasonBox.innerHTML = '<h4>Reasoning:</h4><ul>' + reasons.map(r => `<li>${r}</li>`).join('') + '</ul>';
            
            document.getElementById('decisionResult').style.display = 'block';
        }
    </script>
</body>
</html>
