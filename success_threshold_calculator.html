<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Success Threshold Calculator</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
            background-color: #f4f7f9;
            color: #333;
        }
        .container {
            background: #fff;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            color: #2c3e50;
        }
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .input-group input, .input-group select {
            width: 95%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            font-size: 16px;
            color: #fff;
            background-color: #3498db;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .results-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4f8;
            border-left: 5px solid #3498db;
            border-radius: 5px;
        }
        .results-section h2 {
            margin-top: 0;
        }
        .results-section p {
            font-size: 16px;
        }
        .highlight {
            font-weight: 700;
            color: #2c3e50;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Success Threshold Calculator</h1>
        <p>Calculate the specific business metrics needed to hit a target profit or break-even.</p>

        <h2>Target and Baseline Data</h2>
        <div class="input-group">
            <label for="targetProfit">Target Annual Net Profit (USD)</label>
            <input type="number" id="targetProfit" value="20000" min="0">
        </div>
        <div class="input-group">
            <label for="baseProjects">Baseline Projects</label>
            <input type="number" id="baseProjects" value="5" min="0">
        </div>
        <div class="input-group">
            <label for="bdKpi">BD Monthly Project KPI</label>
            <input type="number" id="bdKpi" value="2.5" min="1" step="0.1">
        </div>
        <div class="input-group">
            <label for="baseUsers">Number of Users per Project</label>
            <input type="number" id="baseUsers" value="200" min="0">
        </div>
        <div class="input-group">
            <label for="purchasesPerUser">Purchases per User</label>
            <input type="number" id="purchasesPerUser" value="2" min="1">
        </div>
        <div class="input-group">
            <label for="claimsPerUser">Claims per User</label>
            <input type="number" id="claimsPerUser" value="3" min="1">
        </div>
        <div class="input-group">
            <label for="baseFundsRaised">Funds Raised per Project (USDT)</label>
            <input type="number" id="baseFundsRaised" value="20000" min="0">
        </div>
        <div class="input-group">
            <label for="baseFeePct">Platform Fee (%)</label>
            <input type="number" id="baseFeePct" value="5" min="0" max="100">
        </div>
        <div class="input-group">
            <label for="fixedCost">Fixed Cost (R&D, etc.) (USD)</label>
            <input type="number" id="fixedCost" value="15000" min="0">
        </div>
        <div class="input-group">
            <label for="marketCap">Total Project Market Cap</label>
            <input type="number" id="marketCap" value="35" min="0">
        </div>

        <button class="btn" onclick="calculateThreshold()">Calculate Thresholds</button>

        <div id="results" class="results-section" style="display: none;">
            <h2>Calculated Thresholds</h2>
            <p id="breakEvenProjects"></p>
            <p id="targetProjectsThreshold"></p>
            <p id="targetUsersThreshold"></p>
            <p id="targetFundsRaisedThreshold"></p>
        </div>
    </div>

    <script>
        function calculateThreshold() {
            const PURCHASE_FEE_USD = 0.6;
            const CLAIM_FEE_USD = 0.6;
            const BD_SALARY_YEARLY = 2000 * 12;
            
            const targetProfit = parseFloat(document.getElementById('targetProfit').value);
            const baseProjects = parseFloat(document.getElementById('baseProjects').value);
            const bdKpi = parseFloat(document.getElementById('bdKpi').value);
            const baseUsers = parseFloat(document.getElementById('baseUsers').value);
            const purchasesPerUser = parseFloat(document.getElementById('purchasesPerUser').value);
            const claimsPerUser = parseFloat(document.getElementById('claimsPerUser').value);
            const baseFundsRaised = parseFloat(document.getElementById('baseFundsRaised').value);
            const baseFeePct = parseFloat(document.getElementById('baseFeePct').value);
            const fixedCost = parseFloat(document.getElementById('fixedCost').value);
            const marketCap = parseFloat(document.getElementById('marketCap').value);
            
            const bdProjectsPerYear = bdKpi * 12;
            const totalRevenuePerProject = (baseFundsRaised * (baseFeePct / 100)) + (baseUsers * purchasesPerUser * PURCHASE_FEE_USD) + (baseUsers * claimsPerUser * CLAIM_FEE_USD);

            // --- Break-even Point Calculation ---
            let breakEvenProjects = "Not possible within the market cap.";
            let currentProjects = baseProjects;
            let found = false;

            while (!found && currentProjects <= marketCap) {
                const bdProjects = currentProjects - baseProjects;
                const bdCountNeeded = bdProjects > 0 ? Math.ceil(bdProjects / bdProjectsPerYear) : 0;
                const totalCost = fixedCost + (bdCountNeeded * BD_SALARY_YEARLY);
                const totalRevenue = currentProjects * totalRevenuePerProject;

                if (totalRevenue >= totalCost) {
                    breakEvenProjects = currentProjects;
                    found = true;
                } else {
                    currentProjects++;
                }
            }

            // --- Target Profit Thresholds Calculation ---
            const targetRevenue = targetProfit + fixedCost;

            // Simplified Target Projects Calculation
            let targetProjectsSimplified = "Not possible within the market cap.";
            let currentProjectsTarget = baseProjects;
            let foundTarget = false;

            while(!foundTarget && currentProjectsTarget <= marketCap){
                const bdProjects = currentProjectsTarget - baseProjects;
                const bdCountNeeded = bdProjects > 0 ? Math.ceil(bdProjects / bdProjectsPerYear) : 0;
                const totalCost = fixedCost + (bdCountNeeded * BD_SALARY_YEARLY);
                const totalRevenue = currentProjectsTarget * totalRevenuePerProject;

                if (totalRevenue >= (targetProfit + totalCost)) {
                    targetProjectsSimplified = currentProjectsTarget;
                    foundTarget = true;
                } else {
                    currentProjectsTarget++;
                }
            }
            
            // Target Users and Funds Raised (assuming fixed projects)
            const baseTotalProjects = Math.min(baseProjects + (bdCount * bdKpi * 12), marketCap);
            const neededRevenue = targetProfit + (fixedCost + (Math.ceil((baseTotalProjects - baseProjects) / bdProjectsPerYear) * BD_SALARY_YEARLY));
            const neededRevenueFromFees = neededRevenue - (baseTotalProjects * baseFundsRaised * (baseFeePct / 100));
            const usersFundsRaisedFactor = (baseTotalProjects * purchasesPerUser * PURCHASE_FEE_USD) + (baseTotalProjects * claimsPerUser * CLAIM_FEE_USD);
            const usersNeeded = neededRevenueFromFees / usersFundsRaisedFactor * baseUsers;
            const fundsRaisedNeeded = (neededRevenue - (baseTotalProjects * baseUsers * purchasesPerUser * PURCHASE_FEE_USD) - (baseTotalProjects * baseUsers * claimsPerUser * CLAIM_FEE_USD)) / (baseTotalProjects * (baseFeePct / 100));


            // Display results
            document.getElementById('breakEvenProjects').innerHTML = `The business's break-even point is at **${breakEvenProjects}** projects.`;
            document.getElementById('targetProjectsThreshold').innerHTML = `To achieve a **$${targetProfit.toLocaleString()}** annual net profit, you would need <span class="highlight">${targetProjectsSimplified}</span> projects.`;
            document.getElementById('targetUsersThreshold').innerHTML = `To achieve a **$${targetProfit.toLocaleString()}** annual net profit, you would need <span class="highlight">${Math.ceil(usersNeeded)}</span> users per project.`;
            document.getElementById('targetFundsRaisedThreshold').innerHTML = `To achieve a **$${targetProfit.toLocaleString()}** annual net profit, you would need a **Funds Raised per Project** of <span class="highlight">$${fundsRaisedNeeded.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>.`;
            document.getElementById('results').style.display = 'block';
        }
    </script>
</body>
</html>
